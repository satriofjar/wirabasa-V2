import{u as f,a as k,j as e,U as _}from"./app-CnwEtsDs.js";import{a as y,b as w}from"./app-layout-BGf-i2RO.js";import{B as C}from"./index-YMDpqOSy.js";import{I as n}from"./input-CxE6KHeV.js";import{f as F}from"./utils-C8FxOTaa.js";const E=({productData:r,categories:m,courseClass:i})=>{console.log(i);const{data:l,setData:c,post:b,put:h,reset:u,errors:a,progress:d}=f({category_id:r?.category_id||"",name:r?.name||"",price:r?.price||0,discount:r?.discount||0,is_active:r?.is_active??!0,features:r?.features||[{name:""}],topic:i?.topic||"",zoom_link:i?.zoom_link||"",yt_link:i?.yt_link||"",schedule:i?.schedule||"",poster:null,active_class:i?.is_active??!0}),{props:p}=k(),x=p.flash,v=s=>{s.preventDefault(),r?h(y(r.id).url,{preserveScroll:!0,onSuccess:()=>u(),onError:t=>console.error(t)}):b(w().url,{preserveScroll:!0,onSuccess:()=>u(),onError:t=>console.error(t)})},j=()=>{c("features",[...l.features,{name:""}])},g=s=>{const t=[...l.features];t.splice(s,1),c("features",t)},N=(s,t)=>{const o=[...l.features];o[s].name=t,c("features",o)};return e.jsxs("div",{className:"bg-[#171717] p-2",children:[x?.success&&e.jsx("div",{className:"p-4 bg-green-100 text-green-800 rounded-lg",children:x.success}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"category_id",className:"block mb-1",children:"Category"}),e.jsxs("select",{id:"category_id",value:l.category_id,onChange:s=>c("category_id",s.target.value),className:"border p-2 w-full rounded-sm",children:[e.jsx("option",{value:"",className:"bg-[#171717]",children:"Select Category"}),m.map(s=>e.jsx("option",{value:s.id,className:"bg-[#171717]",children:s.name},s.id))]}),a.category_id&&e.jsx("div",{className:"text-red-500",children:a.category_id})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1",children:"Name"}),e.jsx(n,{type:"text",value:l.name,onChange:s=>c("name",s.target.value),className:"border p-2 w-full"}),a.name&&e.jsx("div",{className:"text-red-500",children:a.name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1",children:"Price"}),e.jsx(n,{type:"number",value:l.price,onChange:s=>c("price",parseInt(s.target.value)),className:"border p-2 w-full"}),a.price&&e.jsx("div",{className:"text-red-500",children:a.price})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1",children:"Discount"}),e.jsx(n,{type:"number",value:l.discount,onChange:s=>c("discount",parseInt(s.target.value)),className:"border p-2 w-full"}),a.discount&&e.jsx("div",{className:"text-red-500",children:a.discount})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1",children:"Active"}),e.jsx("input",{type:"checkbox",checked:l.is_active,onChange:s=>c("is_active",s.target.checked),className:"border p-2"}),a.is_active&&e.jsx("div",{className:"text-red-500",children:a.is_active})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1",children:"Features"}),l.features.map((s,t)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(n,{type:"text",value:s.name,onChange:o=>N(t,o.target.value),className:"flex-1 p-2 border rounded",placeholder:"e.g. React"}),e.jsx("button",{type:"button",className:"px-3 py-1 bg-red-500 text-white rounded",onClick:()=>g(t),disabled:l.features.length===1,children:"-"}),e.jsx("button",{type:"button",className:"px-3 py-1 bg-green-500 text-white rounded",onClick:j,children:"+"})]},t)),a.features&&e.jsx("div",{className:"text-red-500",children:a.features})]}),d&&e.jsxs("div",{className:"mb-2",children:["Uploading... ",d.percentage,"%"]}),(l.category_id==m.find(s=>s.slug=="kelas-sunting")?.id||l.category_id==m.find(s=>s.slug=="kelas-kepewaraan")?.id)&&e.jsxs(_.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1",children:"Topic"}),e.jsx(n,{required:!0,type:"text",value:l.topic,onChange:s=>c("topic",s.target.value),className:"border p-2 w-full"}),a.topic&&e.jsx("div",{className:"text-red-500",children:a.topic})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1",children:"Zoom Link"}),e.jsx(n,{type:"text",value:l.zoom_link,onChange:s=>c("zoom_link",s.target.value),className:"border p-2 w-full"}),a.zoom_link&&e.jsx("div",{className:"text-red-500",children:a.zoom_link})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1",children:"Youtube Link"}),e.jsx(n,{type:"text",value:l.yt_link,onChange:s=>c("yt_link",s.target.value),className:"border p-2 w-full"}),a.yt_link&&e.jsx("div",{className:"text-red-500",children:a.yt_link})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1",children:"Schedule"}),e.jsx("input",{type:"datetime-local",value:F(l.schedule),onChange:s=>c("schedule",s.target.value),className:"border p-2"}),a.schedule&&e.jsx("div",{className:"text-red-500",children:a.schedule})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1",children:"Poster"}),e.jsx(n,{type:"file",accept:"image/*",onChange:s=>c("poster",s.target.files?s.target.files[0]:null),className:"border p-2 w-full"}),a.poster&&e.jsx("div",{className:"text-red-500",children:a.poster})]}),e.jsx("div",{className:"m-3",children:l.poster instanceof File?e.jsx("img",{src:URL.createObjectURL(l.poster),alt:"Preview",className:"mt-2 w-20 h-20 object-cover rounded"}):i?.poster&&e.jsx("img",{src:`/storage/${i.poster}`,alt:"Old",className:"mt-2 w-20 h-20 object-cover rounded"})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1",children:"Active Class"}),e.jsx("input",{type:"checkbox",checked:l.active_class,onChange:s=>c("active_class",s.target.checked),className:"border p-2"}),a.active_class&&e.jsx("div",{className:"text-red-500",children:a.active_class})]})]}),d&&e.jsxs("div",{className:"mb-2",children:["Uploading... ",d.percentage,"%"]}),e.jsx(C,{type:"submit",className:"w-50 bg-white text-black hover:bg-gray-200",children:r?"Edit":"Create"})]})]})};export{E as P};
